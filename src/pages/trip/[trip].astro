---
import { getFlightById, getFlights } from "../../../lib/actions/flights/actions"
import { RouteGuard } from "../../components/routeguard"
import { VerticalStepper } from "../../components/stepper/VerticalStepper"
import type { Flight } from "../../components/table/TableModal"
import Layout from "../../layouts/Layout.astro"

export async function getStaticPaths() {
	const flightsRequested = await getFlights()
	return flightsRequested.map((flight: Flight) => ({
		params: { trip: flight.id },
	}))
}
const { trip } = Astro.params
const flight = await getFlightById(trip)
const bookingPhase = flight.phase
---

<Layout title="Trip">
	<RouteGuard client:load="react">
		<div class="flex">
			<VerticalStepper phase={bookingPhase} client:load />
		</div>
	</RouteGuard>
</Layout>
