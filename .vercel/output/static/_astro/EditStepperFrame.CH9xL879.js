import{j as e}from"./jsx-runtime.CDeAccHH.js";import{r as c}from"./index.CqbGxsOR.js";import{u as d,p as f,b as p,g as j}from"./actions.DqSaCuXh.js";import{L as b}from"./LoaderSpinner.t290QIza.js";import"./index.D2MAbzvX.js";const y=[{step:1,title:"First Contact"},{step:2,title:"Quote Creation"},{step:3,title:"Plane Selection"},{step:4,title:"Internal Checking"},{step:5,title:"Confirmation"},{step:6,title:"Flight Payment"},{step:7,title:"Payment Received"},{step:8,title:"Post Flight Routine"}],w=({phase:t,step:s})=>t>s?e.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 12",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 5.917 5.724 10.5 15 1.5"})}):t===s?e.jsx("svg",{className:"rtl:rotate-180 w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 5h12m0 0L9 1m4 4L9 9"})}):e.jsx(e.Fragment,{}),v=({phase:t})=>e.jsx("ol",{className:"space-y-4 w-72",children:y.map(({step:s,title:r},n)=>e.jsx("li",{children:e.jsx("div",{className:`w-full p-4 ${t>s&&"text-green-400 border-green-800 bg-green-800"} border rounded-lg ${t<s&&"bg-gray-800 border-gray-700 text-gray-400"}
                            ${t===s&&"bg-gray-800 border-blue-800 text-blue-400"}
                        `,role:"alert",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium",children:[s," ",r]}),w({phase:t,step:s})]})})},n))}),N=({phase:t,setPhase:s,currentPhase:r,currentFlightId:n,setCurrentFlight:a,setLoading:o})=>{const x=d(i=>i.updateFlights),u=async i=>{o(!0);try{i.preventDefault();const l=t+1;await f({phase:l,id:n});const h=await p(n);a(h);const g=await j();x(g),s(m=>m+1)}catch(l){console.log(l)}finally{o(!1)}};return e.jsxs("div",{className:"w-[100%] flex justify-around",children:[t>1&&e.jsx("button",{type:"button",className:"focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 bg-gray-700 text-gray-300 border-gray-500 hover:text-white hover:bg-gray-600 focus:ring-gray-600",onClick:i=>{i.preventDefault(),s(l=>l-1)},children:"Back"}),t<8&&e.jsx("button",{type:"button",className:"text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",onClick:i=>{i.preventDefault(),s(l=>l+1)},children:"Next Phase"}),t===r&&e.jsx("button",{type:"button",className:"text-white focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-green-600 hover:bg-green-700 focus:ring-green-800",onClick:u,children:"Complete Phase"})]})},k=({currentFlight:t,localPhase:s})=>{const r=d(n=>n.clients).find(n=>n.id===parseInt(t.master_passenger));switch(s){case 1:return e.jsxs("div",{className:"w-[100%] h-[100%] grid grid-cols-2 gap-16",children:[e.jsxs("h2",{className:"text-xl text-center",children:["From: ",e.jsx("br",{}),t.from]}),e.jsxs("h2",{className:"text-xl text-center",children:["To: ",e.jsx("br",{}),t.to]}),e.jsxs("h2",{className:"text-xl text-center",children:["Master Passenger: ",e.jsx("br",{}),r&&r.fullname]}),e.jsxs("h2",{className:"text-xl text-center",children:["Launch time: ",e.jsx("br",{}),t.launchtime.slice(0,16)]})]});case 2:return e.jsxs("div",{className:"w-[100%] h-[100%] grid grid-cols-2 gap-16",children:[e.jsxs("h2",{className:"text-xl text-center",children:["Cost: ",e.jsx("br",{}),"$",t&&t.price_cost]}),e.jsxs("h2",{className:"text-xl text-center",children:["Markup: ",e.jsx("br",{}),"$",t&&t.price_revenue]})]});case 3:return e.jsx(e.Fragment,{children:e.jsx("p",{children:"Waiting for Client to choose plane."})});case 4:return e.jsx(e.Fragment,{children:e.jsx("p",{children:"Planes chosen by the client."})});case 5:return e.jsx(e.Fragment,{children:"Send invoice with detailed prices."});case 6:return e.jsx(e.Fragment,{children:"Waiting for client to pay."});case 7:return e.jsx(e.Fragment,{children:"Check client has correctly payed and alert crew of the plane."});default:return e.jsx(e.Fragment,{children:"Post Routine Flight."})}},C=({currentFlight:t,localPhase:s,loading:r})=>e.jsxs("div",{className:"w-full h-[30%] flex justify-center items-center ",children:[k({currentFlight:t,localPhase:s}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx(b,{})})]}),P=({localPhase:t,setLocalPhase:s,currentFlight:r,setCurrentFlight:n})=>{const[a,o]=c.useState(!1);return e.jsxs("div",{className:"w-[700px] h-[70%] flex flex-col items-center justify-evenly bg-[#166ba3] bg-opacity-30 border-blue-800 rounded-lg",children:[e.jsxs("h1",{className:"text-3xl",children:["Flight Phase: ",t]}),e.jsx(C,{currentFlight:r,localPhase:t,loading:a}),r&&e.jsx(N,{phase:t,setPhase:s,currentPhase:r.phase,currentFlightId:r.id,setCurrentFlight:n,setLoading:o})]})},E=({flightRequested:t})=>{const[s,r]=c.useState(t.phase),[n,a]=c.useState(t);return e.jsxs("div",{className:"flex h-full justify-center items-center gap-8",children:[e.jsxs("div",{className:"flex flex-col h-full justify-center items-start",children:[e.jsx("button",{type:"button",className:"focus:ring-4 focus:outline-none mb-2 focus:ring-blue-300 rounded-lg border text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 bg-gray-700 text-gray-300 border-gray-500 hover:text-white hover:bg-gray-600 focus:ring-gray-600",onClick:()=>window.location.href="/Trips",children:"Back"}),e.jsx(P,{localPhase:s,setLocalPhase:r,currentFlight:n,setCurrentFlight:a})]}),n&&e.jsx(v,{phase:n.phase})]})};export{E as EditStepperFrame};
