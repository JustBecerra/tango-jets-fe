import{j as e}from"./jsx-runtime.CDeAccHH.js";import{r as s}from"./index.CqbGxsOR.js";import{T as c,H as F,M as k,F as N,S as T,f as D}from"./FlightInfo.Bs26Tta2.js";import{u as C,g as E,b as L,a as M}from"./getCookie.DsNjL6-r.js";import{L as H}from"./LoaderSpinner.t290QIza.js";import"./index.D2MAbzvX.js";import"./index.Cb2GqDXq.js";const A=()=>{const[t,m]=s.useState("first"),[d,a]=s.useState(!1),[n,h]=s.useState({launchtime:new Date,to:"",from:"",price_cost:"",price_revenue:0,airship_name:"",master_passenger:"",companion_passengers:[]}),[p,l]=s.useState(!1),{updateFlights:f}=C(r=>r),u=async r=>{r.preventDefault(),l(!0);const{launchtime:g,to:x,from:j,price_cost:S,price_revenue:w,airship_name:v,master_passenger:_,companion_passengers:b}=n,y=E("username"),o={launchtime:g.toISOString().slice(0,16),to:x,from:j,price_cost:S,price_revenue:w,airship_name:v,master_passenger:_,companion_passengers:b,createdby:y};o.master_passenger,D(o);try{await L(o);const i=await M();f(i),a(!0),setTimeout(()=>{a(!1),window.location.href="/Trips"},2e3)}catch(i){console.error("Error adding flight:",i)}finally{l(!1)}};return e.jsxs("div",{className:"relative overflow-x-auto overflow-y-auto max-h-[800px] w-full max-w-[100%] shadow-md sm:rounded-lg px-6",children:[d&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2",children:e.jsxs(c,{children:[e.jsx("div",{className:"inline-flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-green-100 text-green-500 dark:bg-green-800 dark:text-green-200",children:e.jsx(F,{className:"h-5 w-5"})}),e.jsx("div",{className:"ml-3 text-sm font-normal",children:"Flight added successfully."}),e.jsx(c.Toggle,{onClick:()=>a(!1)})]})}),e.jsx(k,{phase:t}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("form",{onSubmit:u,children:[e.jsx(N,{phase:t,formData:n,setFormData:h}),e.jsx(T,{phase:t,setPhase:m,operation:"add"})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx(H,{})})]})};export{A as default};
