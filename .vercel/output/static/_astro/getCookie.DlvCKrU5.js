import{R as w}from"./index.CqbGxsOR.js";const T=t=>{let e;const r=new Set,o=(i,p)=>{const g=typeof i=="function"?i(e):i;if(!Object.is(g,e)){const m=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),r.forEach(h=>h(e,m))}},a=()=>e,u={setState:o,getState:a,getInitialState:()=>d,subscribe:i=>(r.add(i),()=>r.delete(i))},d=e=t(o,a,u);return u},H=t=>t?T(t):T,$=t=>t;function j(t,e=$){const r=w.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return w.useDebugValue(r),r}const O=t=>{const e=H(t),r=o=>j(e,o);return Object.assign(r,e),r},_=t=>t?O(t):O;function k(t,e){let r;try{r=t()}catch{return}return{getItem:a=>{var s;const f=d=>d===null?null:JSON.parse(d,void 0),u=(s=r.getItem(a))!=null?s:null;return u instanceof Promise?u.then(f):f(u)},setItem:(a,s)=>r.setItem(a,JSON.stringify(s,void 0)),removeItem:a=>r.removeItem(a)}}const b=t=>e=>{try{const r=t(e);return r instanceof Promise?r:{then(o){return b(o)(r)},catch(o){return this}}}catch(r){return{then(o){return this},catch(o){return b(o)(r)}}}},F=(t,e)=>(r,o,a)=>{let s={storage:k(()=>localStorage),partialize:n=>n,version:0,merge:(n,v)=>({...v,...n}),...e},f=!1;const u=new Set,d=new Set;let i=s.storage;if(!i)return t((...n)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...n)},o,a);const p=()=>{const n=s.partialize({...o()});return i.setItem(s.name,{state:n,version:s.version})},g=a.setState;a.setState=(n,v)=>{g(n,v),p()};const m=t((...n)=>{r(...n),p()},o,a);a.getInitialState=()=>m;let h;const I=()=>{var n,v;if(!i)return;f=!1,u.forEach(c=>{var l;return c((l=o())!=null?l:m)});const S=((v=s.onRehydrateStorage)==null?void 0:v.call(s,(n=o())!=null?n:m))||void 0;return b(i.getItem.bind(i))(s.name).then(c=>{if(c)if(typeof c.version=="number"&&c.version!==s.version){if(s.migrate){const l=s.migrate(c.state,c.version);return l instanceof Promise?l.then(y=>[!0,y]):[!0,l]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,c.state];return[!1,void 0]}).then(c=>{var l;const[y,E]=c;if(h=s.merge(E,(l=o())!=null?l:m),r(h,!0),y)return p()}).then(()=>{S?.(h,void 0),h=o(),f=!0,d.forEach(c=>c(h))}).catch(c=>{S?.(void 0,c)})};return a.persist={setOptions:n=>{s={...s,...n},n.storage&&(i=n.storage)},clearStorage:()=>{i?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>I(),hasHydrated:()=>f,onHydrate:n=>(u.add(n),()=>{u.delete(n)}),onFinishHydration:n=>(d.add(n),()=>{d.delete(n)})},s.skipHydration||I(),h||m},P=F,x=_(P(t=>({flights:[],updateFlights:e=>t({flights:e}),airships:[],updateAirships:e=>t({airships:e}),clients:[],updateClients:e=>t({clients:e})}),{name:"data-storage",storage:k(()=>sessionStorage)}));async function J(){try{const t=await fetch("https://vuelos-be.onrender.com/flights");if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return await t.json()}catch(t){throw console.error("Error fetching flights:",t),t}}async function N(t){try{const e=await fetch("https://vuelos-be.onrender.com/flight",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const r=await e.text();return r?JSON.parse(r):{}}catch(e){throw console.error("Error adding flight:",e),e}}const C=t=>{const r=`; ${document.cookie}`.split(`; ${t}=`);if(r.length===2)return r.pop().split(";").shift()};export{J as a,N as b,C as g,x as u};
