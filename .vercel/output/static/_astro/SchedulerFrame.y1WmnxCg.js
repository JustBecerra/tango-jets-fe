import{j as e}from"./jsx-runtime.CDeAccHH.js";import{r as s}from"./index.CqbGxsOR.js";import{T as c,H as b,M as N,F as T,S as k,f as D}from"./FlightInfo.BJO-DU8G.js";import{u as C,a as E,g as L}from"./actions.DO97vJB2.js";import{g as M}from"./getCookie.CtV4NB4x.js";import{L as H}from"./LoaderSpinner.t290QIza.js";import"./index.D2MAbzvX.js";import"./index.Cb2GqDXq.js";const G=()=>{const[t,m]=s.useState("first"),[d,a]=s.useState(!1),[n,p]=s.useState({launchtime:new Date,to:"",from:"",price_cost:"",price_revenue:0,airship_name:"",master_passenger:"",companion_passengers:[]}),[f,l]=s.useState(!1),{updateFlights:h}=C(r=>r),u=async r=>{r.preventDefault(),l(!0);const{launchtime:g,to:x,from:j,price_cost:S,price_revenue:w,airship_name:v,master_passenger:y,companion_passengers:_}=n,F=M("username"),o={launchtime:g.toISOString().slice(0,16),to:x,from:j,price_cost:S,price_revenue:w,airship_name:v,master_passenger:y,companion_passengers:_,createdby:F};o.master_passenger,D(o);try{await E(o);const i=await L();h(i),a(!0),setTimeout(()=>{a(!1),window.location.href="/Trips"},2e3)}catch(i){console.error("Error adding flight:",i)}finally{l(!1)}};return e.jsxs("div",{className:"relative overflow-x-auto overflow-y-auto max-h-[800px] bg-gray-700 w-full max-w-[100%] shadow-md sm:rounded-lg px-6",children:[d&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2",children:e.jsxs(c,{children:[e.jsx("div",{className:"inline-flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-green-100 text-green-500",children:e.jsx(b,{className:"h-5 w-5"})}),e.jsx("div",{className:"ml-3 text-sm font-normal",children:"Flight added successfully."}),e.jsx(c.Toggle,{onClick:()=>a(!1)})]})}),e.jsx(N,{phase:t}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("form",{onSubmit:u,children:[e.jsx(T,{phase:t,formData:n,setFormData:p}),e.jsx(k,{phase:t,setPhase:m,operation:"add"})]})}),f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx(H,{})})]})};export{G as default};
